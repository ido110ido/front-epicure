{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/OneDrive/\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4/full stack curse/epicure/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import{useSelector}from\"react-redux\";import OrderCardDish from\"../../Cards/CardDish/orderCardDish/orderCardDish\";import{MainButton,SecondaryButton}from\"../../Styled_Components/Buttons\";import\"./BagPopUp.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BagPopUp=function BagPopUp(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hasOrder=_useState2[0],setHasOrder=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),restaurantName=_useState4[0],setRestaurantName=_useState4[1];var modalRef=useRef(null);var needToClose=function needToClose(event){var _props$ButtonRef$curr;var target=event.target;return!((target===null||target===void 0?void 0:target.parentElement)===((_props$ButtonRef$curr=props.ButtonRef.current)===null||_props$ButtonRef$curr===void 0?void 0:_props$ButtonRef$curr.parentElement))&&modalRef.current&&!modalRef.current.contains(target);};var handleClickOutside=function handleClickOutside(event){if(needToClose(event)){props.closingFunc();document.removeEventListener(\"click\",handleClickOutside);}};var totalOrderPrice=0;useEffect(function(){document.addEventListener(\"click\",handleClickOutside);if(orders.length>0){var _restaurantList$find;setHasOrder(true);setRestaurantName(((_restaurantList$find=restaurantList.find(function(e){return e._id===orders[0].restaurantId;}))===null||_restaurantList$find===void 0?void 0:_restaurantList$find.name)||\"\");}},[]);var orders=useSelector(function(state){return state.order.value;});var restaurantList=useSelector(function(state){return state.restaurants.restaurantsData;});return/*#__PURE__*/_jsxs(\"div\",{className:\"BagPopUp\",ref:modalRef,children:[!hasOrder?/*#__PURE__*/_jsx(\"img\",{src:\"/imges/emptyBagMesseg.svg\",alt:\"emptyBag\",className:\"emptyBag\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"orderBody\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"YOUR ORDER\"}),/*#__PURE__*/_jsx(\"h4\",{children:restaurantName}),/*#__PURE__*/_jsx(\"div\",{className:\"dishCardContinuer\",children:orders.map(function(e){totalOrderPrice+=e.price*e.amount;return/*#__PURE__*/_jsx(OrderCardDish,{value:e});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"priceOrder\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20AA\",totalOrderPrice]}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsx(\"span\",{children:\"Add A Comment\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"p\",placeholder:\"Special requests, allergies, detary restrictions, etc.\"}),/*#__PURE__*/_jsx(MainButton,{isActive:true,children:\"Checkout\"})]}),/*#__PURE__*/_jsx(SecondaryButton,{isActive:true,className:!hasOrder?\"emptyLIstButton\":\"\",children:\"Order history\"})]});};export default BagPopUp;","map":{"version":3,"names":["React","useEffect","useRef","useState","useSelector","OrderCardDish","MainButton","SecondaryButton","BagPopUp","props","hasOrder","setHasOrder","restaurantName","setRestaurantName","modalRef","needToClose","event","target","parentElement","ButtonRef","current","contains","handleClickOutside","closingFunc","document","removeEventListener","totalOrderPrice","addEventListener","orders","length","restaurantList","find","e","_id","restaurantId","name","state","order","value","restaurants","restaurantsData","map","price","amount"],"sources":["C:/Users/User/OneDrive/שולחן העבודה/full stack curse/epicure/src/component/PopUps/BagPopUp/BagPopUp.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../../data/store\";\r\nimport OrderCardDish from \"../../Cards/CardDish/orderCardDish/orderCardDish\";\r\nimport { MainButton, SecondaryButton } from \"../../Styled_Components/Buttons\";\r\nimport \"./BagPopUp.css\";\r\ninterface IBagPopUp {\r\n  closingFunc: () => void;\r\n  ButtonRef: React.RefObject<HTMLButtonElement>;\r\n}\r\nconst BagPopUp: React.FC<IBagPopUp> = (props) => {\r\n  const [hasOrder, setHasOrder] = useState<boolean>(false);\r\n  const [restaurantName, setRestaurantName] = useState<string>(\"\");\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const needToClose = (event: MouseEvent) => {\r\n    const target = event.target as Element | null;\r\n    return (\r\n      !(target?.parentElement === props.ButtonRef.current?.parentElement) &&\r\n      modalRef.current &&\r\n      !modalRef.current.contains(target)\r\n    );\r\n  };\r\n\r\n  const handleClickOutside = (event: MouseEvent) => {\r\n    if (needToClose(event)) {\r\n      props.closingFunc();\r\n      document.removeEventListener(\"click\", handleClickOutside);\r\n    }\r\n  };\r\n  let totalOrderPrice: number = 0;\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    if (orders.length > 0) {\r\n      setHasOrder(true);\r\n      setRestaurantName(\r\n        restaurantList.find((e) => e._id === orders[0].restaurantId)?.name || \"\"\r\n      );\r\n    }\r\n  }, []);\r\n  const orders = useSelector((state: RootState) => state.order.value);\r\n  const restaurantList = useSelector(\r\n    (state: RootState) => state.restaurants.restaurantsData\r\n  );\r\n  return (\r\n    <div className=\"BagPopUp\" ref={modalRef}>\r\n      {!hasOrder ? (\r\n        <img\r\n          src=\"/imges/emptyBagMesseg.svg\"\r\n          alt=\"emptyBag\"\r\n          className=\"emptyBag\"\r\n        />\r\n      ) : (\r\n        <div className=\"orderBody\">\r\n          <h3>YOUR ORDER</h3>\r\n          <h4>{restaurantName}</h4>\r\n          <div className=\"dishCardContinuer\">\r\n            {orders.map((e) => {\r\n              totalOrderPrice += e.price * e.amount;\r\n              return <OrderCardDish value={e} />;\r\n            })}\r\n          </div>\r\n          <div className=\"priceOrder\">\r\n            <hr />\r\n            <span>₪{totalOrderPrice}</span>\r\n            <hr />\r\n          </div>\r\n          <span>Add A Comment</span>\r\n          <textarea\r\n            className=\"p\"\r\n            placeholder=\"Special requests, allergies, detary restrictions, etc.\"\r\n          />\r\n          <MainButton isActive={true}>Checkout</MainButton>\r\n        </div>\r\n      )}\r\n      <SecondaryButton\r\n        isActive={true}\r\n        className={!hasOrder ? \"emptyLIstButton\" : \"\"}\r\n      >\r\n        Order history\r\n      </SecondaryButton>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BagPopUp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}