{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { DayPart } from \"../component/Types/enums/DishEnums\";\nimport data from \"./resturants.json\";\nconst filterByDayPart = async (restaurantId, DayPart) => {\n  try {\n    let data = await axios.post(\"http://localhost:8000/dishes\", {\n      resturantId: restaurantId,\n      DayPart: DayPart\n    });\n    return data.data;\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const dishSlice = createSlice({\n  name: \"dishes\",\n  initialState: {\n    dishesData: data.dishes,\n    value: data.dishes\n  },\n  reducers: {\n    morning: (state, action) => {\n      fetch(\"http://localhost:8000/dishes\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          resturantId: \"64075501752f15ccca196049\",\n          DayPart: DayPart.Breakfast\n        }),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(response => response.json()).then(data => {\n        state.value = data.data;\n      }).catch(error => {\n        console.error(\"Error adding user:\", error);\n      });\n      // state.value = await filterByDayPart(\n      //   \"64075501752f15ccca196049\",\n      //   DayPart.Breakfast\n      // );\n    },\n\n    noon: (state, action) => {\n      state.value = state.dishesData.filter(e => e.DayPart === DayPart.Launch && e.resturantId === action.payload);\n    },\n    evening: (state, action) => {\n      state.value = state.dishesData.filter(e => e.DayPart === DayPart.Dinner && e.resturantId === action.payload);\n    },\n    topThreePopularDish: state => {\n      state.value = state.dishesData.sort((a, b) => a.visited - b.visited).slice(0, 3);\n    }\n  }\n});\nexport const {\n  morning,\n  noon,\n  evening,\n  topThreePopularDish\n} = dishSlice.actions;\nexport default dishSlice.reducer;","map":{"version":3,"names":["createSlice","axios","DayPart","data","filterByDayPart","restaurantId","post","resturantId","error","console","dishSlice","name","initialState","dishesData","dishes","value","reducers","morning","state","action","fetch","method","body","JSON","stringify","Breakfast","headers","then","response","json","catch","noon","filter","e","Launch","payload","evening","Dinner","topThreePopularDish","sort","a","b","visited","slice","actions","reducer"],"sources":["C:/Users/User/OneDrive/שולחן העבודה/full stack curse/epicure/front/src/data/dishSlicer.tsx"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { DayPart } from \"../component/Types/enums/DishEnums\";\r\nimport { IDish } from \"../component/Types/Interfaces/IDishCard\";\r\nimport data from \"./resturants.json\";\r\nexport interface IDishesState {\r\n  value: IDish[];\r\n}\r\nconst filterByDayPart = async (restaurantId: string, DayPart: DayPart) => {\r\n  try {\r\n    let data = await axios.post(\"http://localhost:8000/dishes\", {\r\n      resturantId: restaurantId,\r\n      DayPart: DayPart,\r\n    });\r\n    return data.data;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nexport const dishSlice = createSlice({\r\n  name: \"dishes\",\r\n  initialState: {\r\n    dishesData: data.dishes,\r\n    value: data.dishes,\r\n  },\r\n  reducers: {\r\n    morning: (state, action) => {\r\n      fetch(\"http://localhost:8000/dishes\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          resturantId: \"64075501752f15ccca196049\",\r\n          DayPart: DayPart.Breakfast,\r\n        }),\r\n        headers: {\r\n          \"Content-type\": \"application/json; charset=UTF-8\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          state.value = data.data;\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error adding user:\", error);\r\n        });\r\n      // state.value = await filterByDayPart(\r\n      //   \"64075501752f15ccca196049\",\r\n      //   DayPart.Breakfast\r\n      // );\r\n    },\r\n    noon: (state, action) => {\r\n      state.value = state.dishesData.filter(\r\n        (e) => e.DayPart === DayPart.Launch && e.resturantId === action.payload\r\n      );\r\n    },\r\n    evening: (state, action) => {\r\n      state.value = state.dishesData.filter(\r\n        (e) => e.DayPart === DayPart.Dinner && e.resturantId === action.payload\r\n      );\r\n    },\r\n    topThreePopularDish: (state) => {\r\n      state.value = state.dishesData\r\n        .sort((a, b) => a.visited - b.visited)\r\n        .slice(0, 3);\r\n    },\r\n  },\r\n});\r\n\r\nexport const { morning, noon, evening, topThreePopularDish } =\r\n  dishSlice.actions;\r\n\r\nexport default dishSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,oCAAoC;AAE5D,OAAOC,IAAI,MAAM,mBAAmB;AAIpC,MAAMC,eAAe,GAAG,OAAOC,YAAoB,EAAEH,OAAgB,KAAK;EACxE,IAAI;IACF,IAAIC,IAAI,GAAG,MAAMF,KAAK,CAACK,IAAI,CAAC,8BAA8B,EAAE;MAC1DC,WAAW,EAAEF,YAAY;MACzBH,OAAO,EAAEA;IACX,CAAC,CAAC;IACF,OAAOC,IAAI,CAACA,IAAI;EAClB,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;EACtB;AACF,CAAC;AAED,OAAO,MAAME,SAAS,GAAGV,WAAW,CAAC;EACnCW,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE;IACZC,UAAU,EAAEV,IAAI,CAACW,MAAM;IACvBC,KAAK,EAAEZ,IAAI,CAACW;EACd,CAAC;EACDE,QAAQ,EAAE;IACRC,OAAO,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC1BC,KAAK,CAAC,8BAA8B,EAAE;QACpCC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBjB,WAAW,EAAE,0BAA0B;UACvCL,OAAO,EAAEA,OAAO,CAACuB;QACnB,CAAC,CAAC;QACFC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC,CACCC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACnCF,IAAI,CAAExB,IAAI,IAAK;QACde,KAAK,CAACH,KAAK,GAAGZ,IAAI,CAACA,IAAI;MACzB,CAAC,CAAC,CACD2B,KAAK,CAAEtB,KAAK,IAAK;QAChBC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC5C,CAAC,CAAC;MACJ;MACA;MACA;MACA;IACF,CAAC;;IACDuB,IAAI,EAAE,CAACb,KAAK,EAAEC,MAAM,KAAK;MACvBD,KAAK,CAACH,KAAK,GAAGG,KAAK,CAACL,UAAU,CAACmB,MAAM,CAClCC,CAAC,IAAKA,CAAC,CAAC/B,OAAO,KAAKA,OAAO,CAACgC,MAAM,IAAID,CAAC,CAAC1B,WAAW,KAAKY,MAAM,CAACgB,OAAO,CACxE;IACH,CAAC;IACDC,OAAO,EAAE,CAAClB,KAAK,EAAEC,MAAM,KAAK;MAC1BD,KAAK,CAACH,KAAK,GAAGG,KAAK,CAACL,UAAU,CAACmB,MAAM,CAClCC,CAAC,IAAKA,CAAC,CAAC/B,OAAO,KAAKA,OAAO,CAACmC,MAAM,IAAIJ,CAAC,CAAC1B,WAAW,KAAKY,MAAM,CAACgB,OAAO,CACxE;IACH,CAAC;IACDG,mBAAmB,EAAGpB,KAAK,IAAK;MAC9BA,KAAK,CAACH,KAAK,GAAGG,KAAK,CAACL,UAAU,CAC3B0B,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACE,OAAO,GAAGD,CAAC,CAACC,OAAO,CAAC,CACrCC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAChB;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAE1B,OAAO;EAAEc,IAAI;EAAEK,OAAO;EAAEE;AAAoB,CAAC,GAC1D5B,SAAS,CAACkC,OAAO;AAEnB,eAAelC,SAAS,CAACmC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}