{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport data from \"./resturants.json\";\nconst getDishData = async () => {\n  return await fetch(\"http://localhost:8000/dishes\").then(response => response.json()).then(data => {\n    console.log(data);\n    return data.data;\n  }).catch(error => {\n    console.error(\"Error adding user:\", error);\n  });\n};\nconst dishesData = await getDishData();\n// const filterDishesByDayPart = async (\n//   restaurantId: string,\n//   dayPart: DayPart\n// ) => {\n//   try {\n//     const { data } = await axios.post(\"http://localhost:8000/dishes\", {\n//       resturantId: restaurantId,\n//       DayPart: dayPart,\n//     });\n//     return data;\n//   } catch (error) {\n//     console.error(error);\n//     return [];\n//   }\n// };\n\n// export const fetchDishesByDayPart =\n//   (restaurantId: string, dayPart: DayPart) =>\n//   async (dispatch: Dispatch<AnyAction>) => {\n//     console.log(restaurantId, dayPart);\n//     const dishes: IDish[] = await filterDishesByDayPart(restaurantId, dayPart);\n//     dispatch(setDishes(dishes));\n//   };\n\nexport const dishSlice = createSlice({\n  name: \"dishes\",\n  initialState: {\n    dishesData: data.dishes,\n    value: []\n  },\n  reducers: {\n    setDishes: (state, action) => {\n      state.value = action.payload;\n    },\n    topThreePopularDish: state => {\n      // state.value = state.dishesData\n      //   .sort((a, b) => a.visited - b.visited)\n      //   .slice(0, 3);\n    }\n  }\n});\nexport const {\n  setDishes,\n  topThreePopularDish\n} = dishSlice.actions;\nexport default dishSlice.reducer;","map":{"version":3,"names":["createSlice","data","getDishData","fetch","then","response","json","console","log","catch","error","dishesData","dishSlice","name","initialState","dishes","value","reducers","setDishes","state","action","payload","topThreePopularDish","actions","reducer"],"sources":["C:/Users/User/OneDrive/שולחן העבודה/full stack curse/epicure/front/src/data/dishSlicer.tsx"],"sourcesContent":["import {\r\n  AnyAction,\r\n  createSlice,\r\n  Dispatch,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport { IDish } from \"../component/Types/Interfaces/IDishCard\";\r\nimport data from \"./resturants.json\";\r\nimport { DayPart } from \"../component/Types/enums/DishEnums\";\r\nimport axios from \"axios\";\r\nexport interface IDishesState {\r\n  value: IDish[];\r\n}\r\nconst getDishData = async () => {\r\n  return await fetch(\"http://localhost:8000/dishes\")\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n      return data.data;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error adding user:\", error);\r\n    });\r\n};\r\nconst dishesData: IDish[] = await getDishData();\r\n// const filterDishesByDayPart = async (\r\n//   restaurantId: string,\r\n//   dayPart: DayPart\r\n// ) => {\r\n//   try {\r\n//     const { data } = await axios.post(\"http://localhost:8000/dishes\", {\r\n//       resturantId: restaurantId,\r\n//       DayPart: dayPart,\r\n//     });\r\n//     return data;\r\n//   } catch (error) {\r\n//     console.error(error);\r\n//     return [];\r\n//   }\r\n// };\r\n\r\n// export const fetchDishesByDayPart =\r\n//   (restaurantId: string, dayPart: DayPart) =>\r\n//   async (dispatch: Dispatch<AnyAction>) => {\r\n//     console.log(restaurantId, dayPart);\r\n//     const dishes: IDish[] = await filterDishesByDayPart(restaurantId, dayPart);\r\n//     dispatch(setDishes(dishes));\r\n//   };\r\n\r\nexport const dishSlice = createSlice({\r\n  name: \"dishes\",\r\n  initialState: {\r\n    dishesData: data.dishes,\r\n    value: [] as IDish[],\r\n  },\r\n  reducers: {\r\n    setDishes: (state, action: PayloadAction<IDish[]>) => {\r\n      state.value = action.payload;\r\n    },\r\n    topThreePopularDish: (state) => {\r\n      // state.value = state.dishesData\r\n      //   .sort((a, b) => a.visited - b.visited)\r\n      //   .slice(0, 3);\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setDishes, topThreePopularDish } = dishSlice.actions;\r\n\r\nexport default dishSlice.reducer;\r\n"],"mappings":"AAAA,SAEEA,WAAW,QAGN,kBAAkB;AAEzB,OAAOC,IAAI,MAAM,mBAAmB;AAMpC,MAAMC,WAAW,GAAG,YAAY;EAC9B,OAAO,MAAMC,KAAK,CAAC,8BAA8B,CAAC,CAC/CC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACnCF,IAAI,CAAEH,IAAI,IAAK;IACdM,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;IACjB,OAAOA,IAAI,CAACA,IAAI;EAClB,CAAC,CAAC,CACDQ,KAAK,CAAEC,KAAK,IAAK;IAChBH,OAAO,CAACG,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;EAC5C,CAAC,CAAC;AACN,CAAC;AACD,MAAMC,UAAmB,GAAG,MAAMT,WAAW,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMU,SAAS,GAAGZ,WAAW,CAAC;EACnCa,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE;IACZH,UAAU,EAAEV,IAAI,CAACc,MAAM;IACvBC,KAAK,EAAE;EACT,CAAC;EACDC,QAAQ,EAAE;IACRC,SAAS,EAAE,CAACC,KAAK,EAAEC,MAA8B,KAAK;MACpDD,KAAK,CAACH,KAAK,GAAGI,MAAM,CAACC,OAAO;IAC9B,CAAC;IACDC,mBAAmB,EAAGH,KAAK,IAAK;MAC9B;MACA;MACA;IAAA;EAEJ;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAED,SAAS;EAAEI;AAAoB,CAAC,GAAGV,SAAS,CAACW,OAAO;AAEnE,eAAeX,SAAS,CAACY,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}