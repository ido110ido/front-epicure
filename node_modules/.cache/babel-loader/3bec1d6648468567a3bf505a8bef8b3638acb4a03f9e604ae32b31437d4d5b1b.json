{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst getDishData = async () => {\n  return await fetch(\"http://localhost:8000/dishes\").then(response => response.json()).then(data => {\n    console.log(data);\n    return data.data;\n  }).catch(error => {\n    console.error(\"Error adding user:\", error);\n  });\n};\nconst dishesData = await getDishData();\n\n// const filterDishesByDayPart = async (\n//   restaurantId: string,\n//   dayPart: DayPart\n// ) => {\n//   try {\n//     const { data } = await axios.post(\"http://localhost:8000/dishes\", {\n//       resturantId: restaurantId,\n//       DayPart: dayPart,\n//     });\n//     return data;\n//   } catch (error) {\n//     console.error(error);\n//     return [];\n//   }\n// };\n\n// export const fetchDishesByDayPart =\n//   (restaurantId: string, dayPart: DayPart) =>\n//   async (dispatch: Dispatch<AnyAction>) => {\n//     console.log(restaurantId, dayPart);\n//     const dishes: IDish[] = await filterDishesByDayPart(restaurantId, dayPart);\n//     dispatch(setDishes(dishes));\n//   };\n\nexport const dishSlice = createSlice({\n  name: \"dishes\",\n  initialState: {\n    value: []\n  },\n  reducers: {\n    setDishes: (state, action) => {\n      const filterDish = action.payload;\n      state.value = dishesData.filter(dish => dish.DayPart === filterDish.DayPart && dish.resturantId === filterDish.resturantId);\n    },\n    topThreePopularDish: state => {\n      state.value = dishesData.sort((a, b) => a.visited - b.visited).slice(0, 3);\n    }\n  }\n});\nexport const {\n  setDishes,\n  topThreePopularDish\n} = dishSlice.actions;\nexport default dishSlice.reducer;","map":{"version":3,"names":["createSlice","getDishData","fetch","then","response","json","data","console","log","catch","error","dishesData","dishSlice","name","initialState","value","reducers","setDishes","state","action","filterDish","payload","filter","dish","DayPart","resturantId","topThreePopularDish","sort","a","b","visited","slice","actions","reducer"],"sources":["C:/Users/User/OneDrive/שולחן העבודה/full stack curse/epicure/front/src/data/dishSlicer.tsx"],"sourcesContent":["import {\r\n  AnyAction,\r\n  createSlice,\r\n  Dispatch,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport { IDish } from \"../component/Types/Interfaces/IDishCard\";\r\nimport data from \"./resturants.json\";\r\nimport { DayPart } from \"../component/Types/enums/DishEnums\";\r\nimport axios from \"axios\";\r\nexport interface IDishesState {\r\n  value: IDish[];\r\n}\r\ninterface IDishAction {\r\n  payload: {\r\n    resturantId: string;\r\n    DayPart: DayPart;\r\n  };\r\n  type: string;\r\n}\r\nconst getDishData = async () => {\r\n  return await fetch(\"http://localhost:8000/dishes\")\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n      return data.data;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error adding user:\", error);\r\n    });\r\n};\r\nconst dishesData: IDish[] = await getDishData();\r\n\r\n// const filterDishesByDayPart = async (\r\n//   restaurantId: string,\r\n//   dayPart: DayPart\r\n// ) => {\r\n//   try {\r\n//     const { data } = await axios.post(\"http://localhost:8000/dishes\", {\r\n//       resturantId: restaurantId,\r\n//       DayPart: dayPart,\r\n//     });\r\n//     return data;\r\n//   } catch (error) {\r\n//     console.error(error);\r\n//     return [];\r\n//   }\r\n// };\r\n\r\n// export const fetchDishesByDayPart =\r\n//   (restaurantId: string, dayPart: DayPart) =>\r\n//   async (dispatch: Dispatch<AnyAction>) => {\r\n//     console.log(restaurantId, dayPart);\r\n//     const dishes: IDish[] = await filterDishesByDayPart(restaurantId, dayPart);\r\n//     dispatch(setDishes(dishes));\r\n//   };\r\n\r\nexport const dishSlice = createSlice({\r\n  name: \"dishes\",\r\n  initialState: {\r\n    value: [] as IDish[],\r\n  },\r\n  reducers: {\r\n    setDishes: (state, action) => {\r\n      const filterDish = action.payload;\r\n      state.value = dishesData.filter(\r\n        (dish) =>\r\n          dish.DayPart === filterDish.DayPart &&\r\n          dish.resturantId === filterDish.resturantId\r\n      );\r\n    },\r\n    topThreePopularDish: (state) => {\r\n      state.value = dishesData\r\n        .sort((a, b) => a.visited - b.visited)\r\n        .slice(0, 3);\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setDishes, topThreePopularDish } = dishSlice.actions;\r\n\r\nexport default dishSlice.reducer;\r\n"],"mappings":"AAAA,SAEEA,WAAW,QAGN,kBAAkB;AAezB,MAAMC,WAAW,GAAG,YAAY;EAC9B,OAAO,MAAMC,KAAK,CAAC,8BAA8B,CAAC,CAC/CC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;IACdC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjB,OAAOA,IAAI,CAACA,IAAI;EAClB,CAAC,CAAC,CACDG,KAAK,CAAEC,KAAK,IAAK;IAChBH,OAAO,CAACG,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;EAC5C,CAAC,CAAC;AACN,CAAC;AACD,MAAMC,UAAmB,GAAG,MAAMV,WAAW,EAAE;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMW,SAAS,GAAGZ,WAAW,CAAC;EACnCa,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE;IACZC,KAAK,EAAE;EACT,CAAC;EACDC,QAAQ,EAAE;IACRC,SAAS,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC5B,MAAMC,UAAU,GAAGD,MAAM,CAACE,OAAO;MACjCH,KAAK,CAACH,KAAK,GAAGJ,UAAU,CAACW,MAAM,CAC5BC,IAAI,IACHA,IAAI,CAACC,OAAO,KAAKJ,UAAU,CAACI,OAAO,IACnCD,IAAI,CAACE,WAAW,KAAKL,UAAU,CAACK,WAAW,CAC9C;IACH,CAAC;IACDC,mBAAmB,EAAGR,KAAK,IAAK;MAC9BA,KAAK,CAACH,KAAK,GAAGJ,UAAU,CACrBgB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACE,OAAO,GAAGD,CAAC,CAACC,OAAO,CAAC,CACrCC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAChB;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEd,SAAS;EAAES;AAAoB,CAAC,GAAGd,SAAS,CAACoB,OAAO;AAEnE,eAAepB,SAAS,CAACqB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}