{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport data from \"./resturants.json\";\nimport axios from \"axios\";\nconst filterDishesByDayPart = async (restaurantId, dayPart) => {\n  try {\n    const {\n      data\n    } = await axios.post(\"http://localhost:8000/dishes\", {\n      resturantId: restaurantId,\n      DayPart: dayPart\n    });\n    return data;\n  } catch (error) {\n    console.error(error);\n    return [];\n  }\n};\nexport const dishSlice = createSlice({\n  name: \"dishes\",\n  initialState: {\n    dishesData: data.dishes,\n    value: data.dishes\n  },\n  reducers: {\n    setDishes: (state, action) => {\n      state.value = action.payload;\n    },\n    topThreePopularDish: state => {\n      state.value = state.dishesData.sort((a, b) => a.visited - b.visited).slice(0, 3);\n    }\n  }\n});\nexport const {\n  setDishes,\n  topThreePopularDish\n} = dishSlice.actions;\nexport const fetchDishesByDayPart = (restaurantId, dayPart) => async dispatch => {\n  console.log(restaurantId, dayPart);\n  const dishes = await filterDishesByDayPart(restaurantId, dayPart);\n  dispatch(setDishes(dishes));\n};\nexport default dishSlice.reducer;","map":{"version":3,"names":["createSlice","data","axios","filterDishesByDayPart","restaurantId","dayPart","post","resturantId","DayPart","error","console","dishSlice","name","initialState","dishesData","dishes","value","reducers","setDishes","state","action","payload","topThreePopularDish","sort","a","b","visited","slice","actions","fetchDishesByDayPart","dispatch","log","reducer"],"sources":["C:/Users/User/OneDrive/שולחן העבודה/full stack curse/epicure/front/src/data/dishSlicer.tsx"],"sourcesContent":["import {\r\n  AnyAction,\r\n  createSlice,\r\n  Dispatch,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport { IDish } from \"../component/Types/Interfaces/IDishCard\";\r\nimport data from \"./resturants.json\";\r\nimport { DayPart } from \"../component/Types/enums/DishEnums\";\r\nimport axios from \"axios\";\r\n\r\nexport interface IDishesState {\r\n  value: IDish[];\r\n}\r\n\r\nconst filterDishesByDayPart = async (\r\n  restaurantId: string,\r\n  dayPart: DayPart\r\n) => {\r\n  try {\r\n    const { data } = await axios.post(\"http://localhost:8000/dishes\", {\r\n      resturantId: restaurantId,\r\n      DayPart: dayPart,\r\n    });\r\n    return data;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const dishSlice = createSlice({\r\n  name: \"dishes\",\r\n  initialState: {\r\n    dishesData: data.dishes,\r\n    value: data.dishes,\r\n  },\r\n  reducers: {\r\n    setDishes: (state, action: PayloadAction<IDish[]>) => {\r\n      state.value = action.payload;\r\n    },\r\n    topThreePopularDish: (state) => {\r\n      state.value = state.dishesData\r\n        .sort((a, b) => a.visited - b.visited)\r\n        .slice(0, 3);\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setDishes, topThreePopularDish } = dishSlice.actions;\r\n\r\nexport const fetchDishesByDayPart =\r\n  (restaurantId: string, dayPart: DayPart) =>\r\n  async (dispatch: Dispatch<AnyAction>) => {\r\n    console.log(restaurantId, dayPart);\r\n    const dishes: IDish[] = await filterDishesByDayPart(restaurantId, dayPart);\r\n    dispatch(setDishes(dishes));\r\n  };\r\n\r\nexport default dishSlice.reducer;\r\n"],"mappings":"AAAA,SAEEA,WAAW,QAGN,kBAAkB;AAEzB,OAAOC,IAAI,MAAM,mBAAmB;AAEpC,OAAOC,KAAK,MAAM,OAAO;AAMzB,MAAMC,qBAAqB,GAAG,OAC5BC,YAAoB,EACpBC,OAAgB,KACb;EACH,IAAI;IACF,MAAM;MAAEJ;IAAK,CAAC,GAAG,MAAMC,KAAK,CAACI,IAAI,CAAC,8BAA8B,EAAE;MAChEC,WAAW,EAAEH,YAAY;MACzBI,OAAO,EAAEH;IACX,CAAC,CAAC;IACF,OAAOJ,IAAI;EACb,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAME,SAAS,GAAGX,WAAW,CAAC;EACnCY,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE;IACZC,UAAU,EAAEb,IAAI,CAACc,MAAM;IACvBC,KAAK,EAAEf,IAAI,CAACc;EACd,CAAC;EACDE,QAAQ,EAAE;IACRC,SAAS,EAAE,CAACC,KAAK,EAAEC,MAA8B,KAAK;MACpDD,KAAK,CAACH,KAAK,GAAGI,MAAM,CAACC,OAAO;IAC9B,CAAC;IACDC,mBAAmB,EAAGH,KAAK,IAAK;MAC9BA,KAAK,CAACH,KAAK,GAAGG,KAAK,CAACL,UAAU,CAC3BS,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACE,OAAO,GAAGD,CAAC,CAACC,OAAO,CAAC,CACrCC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAChB;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAET,SAAS;EAAEI;AAAoB,CAAC,GAAGX,SAAS,CAACiB,OAAO;AAEnE,OAAO,MAAMC,oBAAoB,GAC/B,CAACzB,YAAoB,EAAEC,OAAgB,KACvC,MAAOyB,QAA6B,IAAK;EACvCpB,OAAO,CAACqB,GAAG,CAAC3B,YAAY,EAAEC,OAAO,CAAC;EAClC,MAAMU,MAAe,GAAG,MAAMZ,qBAAqB,CAACC,YAAY,EAAEC,OAAO,CAAC;EAC1EyB,QAAQ,CAACZ,SAAS,CAACH,MAAM,CAAC,CAAC;AAC7B,CAAC;AAEH,eAAeJ,SAAS,CAACqB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}